sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/m/MessageToast","sap/ui/model/json/JSONModel"],function(e,a,t,r){"use strict";var o;return e.extend("com.qdt.zshellplugin.controller.View1",{onInit:function(){this.oModel=this.getOwnerCo+
mponent().getModel()},onAfterRendering:function(){var e=this;setTimeout(function(){t.show("Ask ABHI is Lauched Successfully! \n \n Kindly Find the Ask ABHI Icon next to Search Menu.");e.onNavBack()},3e3)},onNavBack:function(){var e=sap.ushell.Container.g+
etService("CrossApplicationNavigation");var a=e&&e.hrefForExternal({target:{semanticObject:"shell",action:"home"}});e.toExternal({target:{shellHash:a}})},oLoadTCodeAppsData:function(e){var t=this;var r=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata+
/sap/zz1_error_log_help_srv/");r.setUseBatch(false);var s=new sap.m.BusyDialog({text:"Processing Error Data... \n Please wait."});s.open();var n="/ERROR_LOGSet(Line=1,Query='')";r.read(n,{success:function(e,a){o=a.headers.uuidc22;s.close();var r=e;t.oBui+
ldFlexBoxWithResponse(r);var n=sap.ui.getCore().byId("oID_AI_ABHI_CHAT").getItems();n[n.length-1].getItems()[0].focus()},error:function(e){s.close();a.error("Ask ABHI, Failed to Search your Errors.")}})},oLoadInitialData:function(e,a){var t=this;var r=sa+
p.ushell.Container.getService("AppLifeCycle");var o=r.getCurrentApplication().applicationType;if(o==="UI5"){var s=sap.ui.getCore().getMessageManager().getMessageModel().getData();t.callAPI(s)}else{var n=sap.ui.getCore().byId("oId_AskAbhiDialog");n.open(a+
);t.oLoadTCodeAppsData()}},oBuildFlexBoxErrors:function(e){var a=this;var t=sap.ui.getCore().byId("oID_AI_ABHI_CHAT");e=e.sort((e,a)=>e.type.localeCompare(a.type));if(e.length){for(var r=0;r<e.length;r++){var o=e[r].message;if(!o.includes("RAISE_SHORTDUM+
P")){var s=new sap.m.HBox;var n=new sap.m.HBox;var i=new sap.m.FlexBox({alignItems:"End",direction:"RowReverse"});var l=new sap.m.Button({text:e[r].message,type:e[r].type==="Warning"?"Attention":e[r].type==="Error"?"Reject":null,width:"50rem",height:"6re+
m",textDirection:"LTR",class:"sapUiLargeMarginBegin sapUiLargeMarginEnd",press:function(e){a.onHandleQuery(e,e.getSource().getText())}});l.addStyleClass("myQueryButtonHeight");i.addItem(l);i.addStyleClass("sapUiSmallMarginTop");s.addItem(l);t.addItem(s)}+
}}this.callAPI(e)},callAPI:function(e){var t=this;let r=true;var o=1;var s=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/sap/zz1_error_log_help_srv/");s.setUseBatch(false);var n=new sap.m.BusyDialog({text:"Processing Error Data... \n Please wait."+
});for(var i=0;i<e.length;i++){if(e[i].type==="Error"){var l={Line:o,Username:sap.ushell.Container.getService("UserInfo").getId(),Msgid:"V"+o,Msgno:"0"+o+"0",Msgv1:"",Msgv2:"",Msgv3:"",Msgv4:"",Errortext:e[i].message,Errordate:"",Errortime:"",Errortype:"+
FIORI",Query:"",Response:"",Semobject:"",Semaction:"",Table:"",service:""};n.open();var d="/ERROR_LOGSet";s.create(d,l,{success:function(e,a){n.close();if(r){t.onNavtoASKAbhiExternalURL();r=false}},error:function(e){n.close();a.error("Ask ABHI, Failed to+
 Post your Errors.")}});o++}}},onNavtoASKAbhiExternalURL:function(){var e=sap.ushell.Container.getService("UserInfo").getId();var t="https://www.ask-abhi.34.160.35.150.nip.io/"+e+"/";a.confirm("ASK Abhi will be Launching in new Tab. \n \n Do you want to +
proceed?",{title:"Confirmation.",actions:[a.Action.OK,a.Action.CANCEL],emphasizedAction:a.Action.YES,onClose:function(e){if(e===a.Action.OK){sap.m.URLHelper.redirect(t,true);sap.ui.getCore().byId("oId_AskAbhiDialog").close()}}})},oBuildFlexBoxWithRespons+
e:function(e){var a=this;var t=sap.ui.getCore().byId("oID_AI_ABHI_CHAT");var r=new sap.m.HBox;var o=new sap.m.HBox;if(e.Query){var s=new sap.m.FlexBox({alignItems:"End",direction:"RowReverse"});var n=new sap.m.TextArea({value:e.Query,growing:true,rows:3,+
growingMaxLines:10,showExceededText:true,width:"100%",editable:false,wrapping:"Hard",class:"sapUiLargeMarginBegin"});n.addStyleClass("myJouleFont");n.addStyleClass("myTextAreaColor");s.addItem(n);s.addStyleClass("sapUiSmallMarginTop");r.addItem(n)}t.addI+
tem(r);if(e.Response){var i=new sap.m.FlexBox({alignItems:"Start"});var n=new sap.m.TextArea({value:e.Response,growing:true,rows:25,growingMaxLines:10,width:"100%",showExceededText:true,editable:false,wrapping:"Hard",class:"sapUiLargeMarginEnd"});n.addSt+
yleClass("myJouleFont");n.addStyleClass("myTextAreaColor");i.addItem(n);i.addStyleClass("sapUiSmallMarginTop");o.addItem(n)}t.addItem(o)},onHandleQuery:function(e,t){var r=this;var s=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/sap/zz1_error_log_+
help_srv/");s.setUseBatch(false);var n=sap.ui.getCore().byId("oID_QueryContextType").getSelected();if(!n){o=""}var i=new sap.m.BusyDialog({text:"Processing Your Query... \n Please wait."});var l=t.replace(/'/g,"''");t=encodeURIComponent(l);i.open();var d+
="/ERROR_LOGSet(Line=2,Query='"+t+"')";s.read(d,{headers:{uuidc22:o||""},success:function(e,a){o=a.headers.uuidc22;i.close();var t=e;r.oBuildFlexBoxWithResponse(t);sap.ui.getCore().byId("oID_QueryInput").setValue("");var s=sap.ui.getCore().byId("oID_AI_A+
BHI_CHAT").getItems();s[s.length-1].getItems()[0].focus()},error:function(e){i.close();a.error("Ask ABHI, Failed to Search your Errors.")}})}})});                                                                                                             
//# sourceMappingURL=View1.controller.js.map                                                                                                                                                                                                                   